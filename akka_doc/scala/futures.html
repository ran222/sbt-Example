


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Futures (Scala) &mdash; Akka Documentation</title>
    <link rel="stylesheet" href="../_static/style.css" tppabs="http://www.gtan.com/akka_doc/_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" tppabs="http://www.gtan.com/akka_doc/_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/prettify.css" tppabs="http://www.gtan.com/akka_doc/_static/prettify.css" type="text/css" />
    <link rel="stylesheet" href="../_static/base.css" tppabs="http://www.gtan.com/akka_doc/_static/base.css" type="text/css" />
    <link rel="stylesheet" href="../_static/docs.css" tppabs="http://www.gtan.com/akka_doc/_static/docs.css" type="text/css" />
    <link rel="stylesheet" href="../../../fonts.googleapis.com/css-family=Exo-300,400,600,700.css" tppabs="http://fonts.googleapis.com/css?family=Exo:300,400,600,700" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js" tppabs="http://www.gtan.com/akka_doc/_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js" tppabs="http://www.gtan.com/akka_doc/_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js" tppabs="http://www.gtan.com/akka_doc/_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/toc.js" tppabs="http://www.gtan.com/akka_doc/_static/toc.js"></script>
    <script type="text/javascript" src="../_static/prettify.js" tppabs="http://www.gtan.com/akka_doc/_static/prettify.js"></script>
    <script type="text/javascript" src="../_static/highlightCode.js" tppabs="http://www.gtan.com/akka_doc/_static/highlightCode.js"></script>
    <script type="text/javascript" src="../_static/effects.core.js" tppabs="http://www.gtan.com/akka_doc/_static/effects.core.js"></script>
    <script type="text/javascript" src="../_static/effects.highlight.js" tppabs="http://www.gtan.com/akka_doc/_static/effects.highlight.js"></script>
    <script type="text/javascript" src="../_static/scrollTo.js" tppabs="http://www.gtan.com/akka_doc/_static/scrollTo.js"></script>
    <script type="text/javascript" src="../_static/contentsFix.js" tppabs="http://www.gtan.com/akka_doc/_static/contentsFix.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Akka Documentation" href="../index.html" />
    <link rel="up" title="Scala API" href="index.html" />
    <link rel="next" title="Dataflow Concurrency (Scala)" href="dataflow.html" />
    <link rel="prev" title="Scheduler (Scala)" href="scheduler.html" /> 
  </head>
  <body>
  <div class="navbar">
    <div class="navbar-inner">
      <div class="container">
        <div class="navbar-logo">
          <a href="javascript:if(confirm('http://akka.io/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://akka.io/'" tppabs="http://akka.io/"><img src="../_static/logo-small.png" tppabs="http://www.gtan.com/akka_doc/_static/logo-small.png" /></a>
        </div>    
        <ul class="nav">
          <li><a href="javascript:if(confirm('http://www.gtan.com/welfare04.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.gtan.com/welfare04.html'" tppabs="http://www.gtan.com/welfare04.html">è¿”å›å¹¿è°ˆå…¬ç›Š</a></li>
        </ul>
      </div>
    </div>
  </div>
  <div class="main">
    <div class="container">
      <div class="page-title">Futures (Scala)</div><div class="pdf-link"><a href="javascript:if(confirm('http://www.gtan.com/akka_doc/Akka.pdf  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ·şÎñÆ÷±¨¸æ¸ÃÎÄ¼şÎ´ÕÒµ½¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.gtan.com/akka_doc/Akka.pdf'" tppabs="http://www.gtan.com/akka_doc/Akka.pdf"><img src="../_static/pdf-icon.png" tppabs="http://www.gtan.com/akka_doc/_static/pdf-icon.png" style="height: 40px;" /></a></div></div>
    <div class="main-container">
      <div class="container">
        <div class="row">
          <div class="span12">
            <ul class="breadcrumb">           
              <li>
                 <span class="divider">|</span> <a href="dataflow.html" tppabs="http://www.gtan.com/akka_doc/scala/dataflow.html">æ•°æ®æµå¹¶å‘ (Scala)</a> <span class="divider">Â»</span>
              </li>
              <li>
                <a href="../index.html" tppabs="http://www.gtan.com/akka_doc/index.html">ç›®å½•</a>
              </li>
              <li>
                <span class="divider">Â«</span> <a href="scheduler.html" tppabs="http://www.gtan.com/akka_doc/scala/scheduler.html">å®šæ—¶å™¨ (Scala)</a> <span class="divider">|</span>
              </li>
              <li>
                ç‰ˆæœ¬ 2.0
              </li>
            </ul>         
          </div>
        </div>
        <div class="row">
          <div class="span9">
            
  <div class="section" id="futures-scala">
<span id="id1"></span><h1>Futures (Scala)</h1>
<div class="section" id="introduction">
<h2>ç®€ä»‹</h2>
<p>åœ¨ Akka ä¸­, ä¸€ä¸ª <a class="reference external" href="javascript:if(confirm('http://en.wikipedia.org/wiki/Futures_and_promises  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://en.wikipedia.org/wiki/Futures_and_promises'" tppabs="http://en.wikipedia.org/wiki/Futures_and_promises">Future</a> æ˜¯ç”¨æ¥è·å–æŸä¸ªå¹¶å‘æ“ä½œçš„ç»“æœçš„æ•°æ®ç»“æ„ã€‚
    è¿™ä¸ªæ“ä½œé€šå¸¸æ˜¯ç”± <tt class="docutils literal"><span class="pre">Actor</span></tt> æ‰§è¡Œæˆ–ç”±
 <tt class="docutils literal"><span class="pre">Dispatcher</span></tt> ç›´æ¥æ‰§è¡Œçš„. è¿™ä¸ªç»“æœå¯ä»¥ä»¥åŒæ­¥ï¼ˆé˜»å¡ï¼‰æˆ–å¼‚æ­¥ï¼ˆéé˜»å¡ï¼‰çš„æ–¹å¼è®¿é—®ã€‚</p>
</div>
<div class="section" id="execution-contexts">
<h2>æ‰§è¡Œä¸Šä¸‹æ–‡</h2>
<p>ä¸ºäº†è¿è¡Œå›è°ƒå’Œæ“ä½œ, Futures éœ€è¦æœ‰ä¸€ä¸ª <tt class="docutils literal"><span class="pre">ExecutionContext</span></tt>,
å®ƒä¸ <tt class="docutils literal"><span class="pre">java.util.concurrent.Executor</span></tt> å¾ˆç›¸åƒ. å¦‚æœä½ åœ¨ä½œç”¨åŸŸå†…æœ‰ä¸€ä¸ª <tt class="docutils literal"><span class="pre">ActorSystem</span></tt> ,
å®ƒä¼šå®ƒè‡ªå·±æ´¾å‘å™¨ç”¨ä½œ <tt class="docutils literal"><span class="pre">ExecutionContext</span></tt>, ä½ ä¹Ÿå¯ä»¥ç”¨ <tt class="docutils literal"><span class="pre">ExecutionContext</span></tt> ä¼´ç”Ÿå¯¹è±¡æä¾›çš„å·¥å‚æ–¹æ³•
    æ¥å°† <tt class="docutils literal"><span class="pre">Executors</span></tt> å’Œ <tt class="docutils literal"><span class="pre">ExecutorServices</span></tt> è¿›è¡ŒåŒ…è£¹, æˆ–è€…ç”šè‡³åˆ›å»ºè‡ªå·±çš„å®ä¾‹.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">import</span> <span class="nn">akka.dispatch.</span><span class="o">{</span> <span class="nc">ExecutionContext</span><span class="o">,</span> <span class="nc">Promise</span> <span class="o">}</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="n">ec</span> <span class="k">=</span> <span class="nc">ExecutionContext</span><span class="o">.</span><span class="n">fromExecutorService</span><span class="o">(</span><span class="n">yourExecutorServiceGoesHere</span><span class="o">)</span>

<span class="c1">// ç”¨ä½ å´­æ–°çš„ ExecutionContext å¹²ç‚¹å•¥</span>
<span class="k">val</span> <span class="n">f</span> <span class="k">=</span> <span class="nc">Promise</span><span class="o">.</span><span class="n">successful</span><span class="o">(</span><span class="s">&quot;foo&quot;</span><span class="o">)</span>

<span class="c1">// ç„¶ååœ¨ç¨‹åº/åº”ç”¨çš„æ­£ç¡®çš„ä½ç½®å…³é—­ ExecutionContext</span>
<span class="n">ec</span><span class="o">.</span><span class="n">shutdown</span><span class="o">()</span>
</pre></div>
</div>
</div>
<div class="section" id="use-with-actors">
<h2>ç”¨äº Actor</h2>
<p>é€šå¸¸æœ‰ä¸¤ç§æ–¹æ³•æ¥ä»ä¸€ä¸ª <tt class="docutils literal"><span class="pre">Actor</span></tt> è·å–å›åº”: ç¬¬ä¸€ç§æ˜¯å‘é€ä¸€ä¸ªæ¶ˆæ¯ (<tt class="docutils literal"><span class="pre">actor</span> <span class="pre">!</span> <span class="pre">msg</span></tt>),
è¿™ç§æ–¹æ³•åªåœ¨å‘é€è€…æ˜¯ä¸€ä¸ª <tt class="docutils literal"><span class="pre">Actor</span></tt>) æ—¶æœ‰æ•ˆï¼Œç¬¬äºŒç§æ˜¯é€šè¿‡ä¸€ä¸ª <tt class="docutils literal"><span class="pre">Future</span></tt>.</p>
<p>ä½¿ç”¨ <tt class="docutils literal"><span class="pre">Actor</span></tt> çš„ <tt class="docutils literal"><span class="pre">?</span></tt> æ–¹æ³•æ¥å‘é€æ¶ˆæ¯ä¼šè¿”å›ä¸€ä¸ª Future.
    è¦ç­‰å¾…å¹¶è·å–ç»“æœçš„æœ€ç®€å•æ–¹æ³•æ˜¯:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">import</span> <span class="nn">akka.dispatch.Await</span>
<span class="k">import</span> <span class="nn">akka.pattern.ask</span>
<span class="k">import</span> <span class="nn">akka.util.Timeout</span>
<span class="k">import</span> <span class="nn">akka.util.duration._</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="n">timeout</span> <span class="k">=</span> <span class="nc">Timeout</span><span class="o">(</span><span class="mi">5</span> <span class="n">seconds</span><span class="o">)</span>
<span class="k">val</span> <span class="n">future</span> <span class="k">=</span> <span class="n">actor</span> <span class="o">?</span> <span class="n">msg</span> <span class="c1">// å› ä¸ºå¯¹ â€œaskâ€ è¿›è¡Œäº†import</span>
<span class="k">val</span> <span class="n">result</span> <span class="k">=</span> <span class="nc">Await</span><span class="o">.</span><span class="n">result</span><span class="o">(</span><span class="n">future</span><span class="o">,</span> <span class="n">timeout</span><span class="o">.</span><span class="n">duration</span><span class="o">).</span><span class="n">asInstanceOf</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span>
</pre></div>
</div>
<p>è¿™ä¼šå¯¼è‡´å½“å‰çº¿ç¨‹è¢«é˜»å¡ï¼Œå¹¶ç­‰å¾… <tt class="docutils literal"><span class="pre">Actor</span></tt> é€šè¿‡å®ƒçš„åº”ç­”æ¥ &#8216;å®Œæˆ&#8217;  <tt class="docutils literal"><span class="pre">Future</span></tt> ã€‚
ä½†æ˜¯é˜»å¡ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œæ‰€ä»¥æ˜¯ä¸æ¨èçš„.
å¯¼è‡´é˜»å¡çš„æ“ä½œä½äº <tt class="docutils literal"><span class="pre">Await.result</span></tt> å’Œ <tt class="docutils literal"><span class="pre">Await.ready</span></tt> ä¸­ï¼Œè¿™æ ·å°±æ–¹ä¾¿å®šä½é˜»å¡çš„ä½ç½®.
å¯¹é˜»å¡æ–¹å¼çš„æ›¿ä»£æ–¹æ³•ä¼šåœ¨æœ¬æ–‡æ¡£ä¸­è¿›ä¸€æ­¥è®¨è®ºã€‚ è¿˜è¦æ³¨æ„ <tt class="docutils literal"><span class="pre">Actor</span></tt> è¿”å›çš„ <tt class="docutils literal"><span class="pre">Future</span></tt> çš„ç±»å‹
    æ˜¯ <tt class="docutils literal"><span class="pre">Future[Any]</span></tt> ï¼Œè¿™æ˜¯å› ä¸º <tt class="docutils literal"><span class="pre">Actor</span></tt> æ˜¯åŠ¨æ€çš„.
    è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¸Šä¾‹ä¸­ä½¿ç”¨äº† <tt class="docutils literal"><span class="pre">asInstanceOf</span></tt> ã€‚
åœ¨ä½¿ç”¨éé˜»å¡æ–¹å¼æ—¶ï¼Œæœ€å¥½ä½¿ç”¨ <tt class="docutils literal"><span class="pre">mapTo</span></tt> æ–¹æ³•æ¥å°† <tt class="docutils literal"><span class="pre">Future</span></tt> è½¬æ¢åˆ°æœŸæœ›çš„ç±»å‹:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">import</span> <span class="nn">akka.dispatch.Future</span>
<span class="k">import</span> <span class="nn">akka.pattern.ask</span>

<span class="k">val</span> <span class="n">future</span><span class="k">:</span> <span class="kt">Future</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span> <span class="k">=</span> <span class="n">ask</span><span class="o">(</span><span class="n">actor</span><span class="o">,</span> <span class="n">msg</span><span class="o">).</span><span class="n">mapTo</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span>
</pre></div>
</div>
<p> å¦‚æœè½¬æ¢æˆåŠŸï¼Œ <tt class="docutils literal"><span class="pre">mapTo</span></tt> æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªåŒ…å«ç»“æœçš„æ–°çš„ <tt class="docutils literal"><span class="pre">Future</span></tt>,
å¦‚æœä¸æˆåŠŸï¼Œåˆ™è¿”å› <tt class="docutils literal"><span class="pre">ClassCastException</span></tt> . å¯¹ <tt class="docutils literal"><span class="pre">å¼‚å¸¸</span></tt> çš„å¤„ç†å°†åœ¨æœ¬æ–‡æ¡£è¿›ä¸€æ­¥è®¨è®ºã€‚</p>
</div>
<div class="section" id="use-directly">
<h2>ç›´æ¥ä½¿ç”¨</h2>
<p>Akkaä¸­çš„ä¸€ä¸ªå¸¸è§ç”¨ä¾‹æ˜¯åœ¨ä¸éœ€è¦ä½¿ç”¨ <tt class="docutils literal"><span class="pre">Actor</span></tt>çš„æƒ…å†µä¸‹å¹¶å‘åœ°æ‰§è¡Œè®¡ç®—.
å¦‚æœä½ å‘ç°ä½ åªæ˜¯ä¸ºäº†å¹¶è¡Œåœ°æ‰§è¡Œä¸€ä¸ªè®¡ç®—è€Œåˆ›å»ºäº†ä¸€å †  <tt class="docutils literal"><span class="pre">Actor</span></tt>,
ä¸‹é¢æ˜¯ä¸€ç§æ›´å¥½ï¼ˆä¹Ÿæ›´å¿«ï¼‰çš„æ–¹æ³•:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">import</span> <span class="nn">akka.dispatch.Await</span>
<span class="k">import</span> <span class="nn">akka.dispatch.Future</span>
<span class="k">import</span> <span class="nn">akka.util.duration._</span>

<span class="k">val</span> <span class="n">future</span> <span class="k">=</span> <span class="nc">Future</span> <span class="o">{</span>
  <span class="s">&quot;Hello&quot;</span> <span class="o">+</span> <span class="s">&quot;World&quot;</span>
<span class="o">}</span>
<span class="k">val</span> <span class="n">result</span> <span class="k">=</span> <span class="nc">Await</span><span class="o">.</span><span class="n">result</span><span class="o">(</span><span class="n">future</span><span class="o">,</span> <span class="mi">1</span> <span class="n">second</span><span class="o">)</span>
</pre></div>
</div>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œè¢«ä¼ é€’ç»™ <tt class="docutils literal"><span class="pre">Future</span></tt> çš„ä»£ç å—ä¼šè¢«ç¼ºçœçš„ <tt class="docutils literal"><span class="pre">Dispatcher</span></tt> æ‰€æ‰§è¡Œ,
ä»£ç å—çš„è¿”å›ç»“æœä¼šè¢«ç”¨æ¥å®Œæˆ <tt class="docutils literal"><span class="pre">Future</span></tt> (åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç»“æœæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²: &#8220;HelloWorld&#8221;).
ä¸ä»<tt class="docutils literal"><span class="pre">Actor</span></tt>è¿”å›çš„ <tt class="docutils literal"><span class="pre">Future</span></tt> ä¸åŒï¼Œè¿™ä¸ª <tt class="docutils literal"><span class="pre">Future</span></tt> æ‹¥æœ‰æ­£ç¡®çš„ç±»å‹,
æˆ‘ä»¬è¿˜é¿å…äº†ç®¡ç†  <tt class="docutils literal"><span class="pre">Actor</span></tt> çš„å¼€é”€ã€‚</p>
<p>ä½ è¿˜å¯ä»¥ç”¨ <tt class="docutils literal"><span class="pre">Promise</span></tt> ä¼´ç”Ÿå¯¹è±¡åˆ›å»ºä¸€ä¸ªå·²ç»å®Œæˆçš„ Future, å®ƒå¯ä»¥æ˜¯æˆåŠŸ:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">future</span> <span class="k">=</span> <span class="nc">Promise</span><span class="o">.</span><span class="n">successful</span><span class="o">(</span><span class="s">&quot;Yay!&quot;</span><span class="o">)</span>
</pre></div>
</div>
<p>æˆ–å¤±è´¥:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">otherFuture</span> <span class="k">=</span> <span class="nc">Promise</span><span class="o">.</span><span class="n">failed</span><span class="o">[</span><span class="kt">String</span><span class="o">](</span><span class="k">new</span> <span class="nc">IllegalArgumentException</span><span class="o">(</span><span class="s">&quot;Bang!&quot;</span><span class="o">))</span>
</pre></div>
</div>
</div>
<div class="section" id="functional-futures">
<h2>å‡½æ•°å¼ Future</h2>
<p>Akka çš„ <tt class="docutils literal"><span class="pre">Future</span></tt> æœ‰ä¸€äº›ä¸Scalaé›†åˆæ‰€ä½¿ç”¨çš„éå¸¸ç›¸ä¼¼çš„ monadic æ–¹æ³•.
è¿™ä½¿ä½ å¯ä»¥æ„é€ å‡ºç»“æœå¯ä»¥ä¼ é€’çš„ &#8216;ç®¡é“&#8217; æˆ– &#8216;æ•°æ®æµ&#8217; .</p>
<div class="section" id="future-is-a-monad">
<h3>Future æ˜¯ Monad</h3>
<p>è®©<tt class="docutils literal"><span class="pre">Future</span></tt>ä»¥å‡½æ•°å¼é£æ ¼å·¥ä½œçš„ç¬¬ä¸€ä¸ªæ–¹æ³•æ˜¯ <tt class="docutils literal"><span class="pre">map</span></tt>. å®ƒéœ€è¦ä¸€ä¸ª <tt class="docutils literal"><span class="pre">å‡½æ•°</span></tt>
æ¥å¯¹ <tt class="docutils literal"><span class="pre">Future</span></tt>çš„ç»“æœè¿›è¡Œå¤„ç†, è¿”å›ä¸€ä¸ªæ–°çš„ç»“æœã€‚
<tt class="docutils literal"><span class="pre">map</span></tt> æ–¹æ³•çš„è¿”å›å€¼æ˜¯åŒ…å«æ–°ç»“æœçš„å¦ä¸€ä¸ª <tt class="docutils literal"><span class="pre">Future</span></tt>:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">f1</span> <span class="k">=</span> <span class="nc">Future</span> <span class="o">{</span>
  <span class="s">&quot;Hello&quot;</span> <span class="o">+</span> <span class="s">&quot;World&quot;</span>
<span class="o">}</span>
<span class="k">val</span> <span class="n">f2</span> <span class="k">=</span> <span class="n">f1</span> <span class="n">map</span> <span class="o">{</span> <span class="n">x</span> <span class="k">â‡’</span>
  <span class="n">x</span><span class="o">.</span><span class="n">length</span>
<span class="o">}</span>
<span class="k">val</span> <span class="n">result</span> <span class="k">=</span> <span class="nc">Await</span><span class="o">.</span><span class="n">result</span><span class="o">(</span><span class="n">f2</span><span class="o">,</span> <span class="mi">1</span> <span class="n">second</span><span class="o">)</span>
<span class="n">result</span> <span class="n">must</span> <span class="n">be</span><span class="o">(</span><span class="mi">10</span><span class="o">)</span>
<span class="n">f1</span><span class="o">.</span><span class="n">value</span> <span class="n">must</span> <span class="n">be</span><span class="o">(</span><span class="nc">Some</span><span class="o">(</span><span class="nc">Right</span><span class="o">(</span><span class="s">&quot;HelloWorld&quot;</span><span class="o">)))</span>
</pre></div>
</div>
<p>è¿™ä¸ªä¾‹å­ä¸­æˆ‘ä»¬åœ¨ <tt class="docutils literal"><span class="pre">Future</span></tt> å†…éƒ¨è¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚æˆ‘ä»¬æ²¡æœ‰ç­‰å¾…è¿™ä¸ªFutureç»“æŸï¼Œè€Œæ˜¯ä½¿ç”¨
 <tt class="docutils literal"><span class="pre">map</span></tt> æ–¹æ³•æ¥å°†è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦çš„å‡½æ•°ä½œç”¨äºå®ƒ.
ç°åœ¨æˆ‘ä»¬æœ‰äº†æ–°çš„ <tt class="docutils literal"><span class="pre">Future</span></tt> ï¼Œå®ƒçš„æœ€ç»ˆç»“æœæ˜¯ä¸€ä¸ª <tt class="docutils literal"><span class="pre">Int</span></tt>.
å½“å…ˆå‰çš„ <tt class="docutils literal"><span class="pre">Future</span></tt> å®Œæˆæ—¶, å®ƒä¼šåº”ç”¨æˆ‘ä»¬çš„å‡½æ•°å¹¶ç”¨å…¶ç»“æœæ¥å®Œæˆç¬¬äºŒä¸ª <tt class="docutils literal"><span class="pre">Future</span></tt> ã€‚
æœ€ç»ˆæˆ‘ä»¬å¾—åˆ°çš„ç»“æœæ˜¯ 10. å…ˆå‰çš„ <tt class="docutils literal"><span class="pre">Future</span></tt> ä»ç„¶æŒæœ‰
å­—ç¬¦ä¸² &#8220;HelloWorld&#8221; ä¸å— <tt class="docutils literal"><span class="pre">map</span></tt>çš„å½±å“.</p>
<p>å¦‚æœæˆ‘ä»¬åªæ˜¯ä¿®æ”¹ä¸€ä¸ª <tt class="docutils literal"><span class="pre">Future</span></tt>ï¼Œ<tt class="docutils literal"><span class="pre">map</span></tt> æ–¹æ³•å°±å¤Ÿç”¨äº†ã€‚
ä½†å¦‚æœæœ‰2ä¸ªä»¥ä¸Š <tt class="docutils literal"><span class="pre">Future</span></tt>æ—¶ <tt class="docutils literal"><span class="pre">map</span></tt> æ— æ³•å°†ä»–ä»¬ç»„åˆåˆ°ä¸€èµ·:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">f1</span> <span class="k">=</span> <span class="nc">Future</span> <span class="o">{</span>
  <span class="s">&quot;Hello&quot;</span> <span class="o">+</span> <span class="s">&quot;World&quot;</span>
<span class="o">}</span>
<span class="k">val</span> <span class="n">f2</span> <span class="k">=</span> <span class="nc">Promise</span><span class="o">.</span><span class="n">successful</span><span class="o">(</span><span class="mi">3</span><span class="o">)</span>
<span class="k">val</span> <span class="n">f3</span> <span class="k">=</span> <span class="n">f1</span> <span class="n">map</span> <span class="o">{</span> <span class="n">x</span> <span class="k">â‡’</span>
  <span class="n">f2</span> <span class="n">map</span> <span class="o">{</span> <span class="n">y</span> <span class="k">â‡’</span>
    <span class="n">x</span><span class="o">.</span><span class="n">length</span> <span class="o">*</span> <span class="n">y</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">f3</span></tt> çš„ç±»å‹æ˜¯ <tt class="docutils literal"><span class="pre">Future[Future[Int]]</span></tt> è€Œä¸æ˜¯æˆ‘ä»¬æ‰€æœŸæœ›çš„ <tt class="docutils literal"><span class="pre">Future[Int]</span></tt>. è¿™æ—¶æˆ‘ä»¬éœ€è¦ä½¿ç”¨ <tt class="docutils literal"><span class="pre">flatMap</span></tt> æ–¹æ³•:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">f1</span> <span class="k">=</span> <span class="nc">Future</span> <span class="o">{</span>
  <span class="s">&quot;Hello&quot;</span> <span class="o">+</span> <span class="s">&quot;World&quot;</span>
<span class="o">}</span>
<span class="k">val</span> <span class="n">f2</span> <span class="k">=</span> <span class="nc">Promise</span><span class="o">.</span><span class="n">successful</span><span class="o">(</span><span class="mi">3</span><span class="o">)</span>
<span class="k">val</span> <span class="n">f3</span> <span class="k">=</span> <span class="n">f1</span> <span class="n">flatMap</span> <span class="o">{</span> <span class="n">x</span> <span class="k">â‡’</span>
  <span class="n">f2</span> <span class="n">map</span> <span class="o">{</span> <span class="n">y</span> <span class="k">â‡’</span>
    <span class="n">x</span><span class="o">.</span><span class="n">length</span> <span class="o">*</span> <span class="n">y</span>
  <span class="o">}</span>
<span class="o">}</span>
<span class="k">val</span> <span class="n">result</span> <span class="k">=</span> <span class="nc">Await</span><span class="o">.</span><span class="n">result</span><span class="o">(</span><span class="n">f3</span><span class="o">,</span> <span class="mi">1</span> <span class="n">second</span><span class="o">)</span>
<span class="n">result</span> <span class="n">must</span> <span class="n">be</span><span class="o">(</span><span class="mi">30</span><span class="o">)</span>
</pre></div>
</div>
<p>ä½¿ç”¨åµŒå¥—çš„mapæˆ–flatmapæ¥ç»„åˆFutureæœ‰æ—¶ä¼šå˜å¾—éå¸¸å¤æ‚å’Œéš¾ä»¥é˜…è¯»ï¼Œè¿™æ—¶ä½¿ç”¨ Scala çš„
&#8216;for comprehensions&#8217; ä¸€èˆ¬ä¼šç”Ÿæˆå¯è¯»æ€§æ›´å¥½çš„ä»£ç ã€‚ è§ä¸‹ä¸€éƒ¨åˆ†çš„ç¤ºä¾‹ã€‚</p>
<p>å¦‚æœä½ éœ€è¦è¿›è¡Œæ¡ä»¶ç­›é€‰ï¼Œå¯ä»¥ä½¿ç”¨ <tt class="docutils literal"><span class="pre">filter</span></tt>:</p>
<div class="highlight-scala"><pre>val future1 = Promise.successful(4)
val future2 = future1.filter(_ % 2 == 0)
val result = Await.result(future2, 1 second)
result must be(4)

val failedFilter = future1.filter(_ % 2 == 1).recover {
  case m: MatchError â‡’ 0 // å¦‚æœ filter å¤±è´¥äº†ï¼Œå®ƒä¼šå¯¼è‡´ä¸€ä¸ª MatchError
}
val result2 = Await.result(failedFilter, 1 second)
result2 must be(0) // å½“å‡ºç° MatchError æ—¶åªèƒ½æ˜¯ 0
</pre>
</div>
</div>
<div class="section" id="for-comprehensions">
<h3>For Comprehensions</h3>
<p>ç”±äº <tt class="docutils literal"><span class="pre">Future</span></tt> æ‹¥æœ‰ <tt class="docutils literal"><span class="pre">map</span></tt>, <tt class="docutils literal"><span class="pre">filter</span></tt> å’Œ <tt class="docutils literal"><span class="pre">flatMap</span></tt> æ–¹æ³•ï¼Œå®ƒå¯ä»¥æ–¹ä¾¿åœ°ç”¨äº &#8216;for comprehension&#8217;:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">f</span> <span class="k">=</span> <span class="k">for</span> <span class="o">{</span>
  <span class="n">a</span> <span class="k">â†</span> <span class="nc">Future</span><span class="o">(</span><span class="mi">10</span> <span class="o">/</span> <span class="mi">2</span><span class="o">)</span> <span class="c1">// 10 / 2 = 5</span>
  <span class="n">b</span> <span class="k">â†</span> <span class="nc">Future</span><span class="o">(</span><span class="n">a</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span> <span class="c1">//  5 + 1 = 6</span>
  <span class="n">c</span> <span class="k">â†</span> <span class="nc">Future</span><span class="o">(</span><span class="n">a</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span> <span class="c1">//  5 - 1 = 4</span>
  <span class="k">if</span> <span class="n">c</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="c1">// Future.filter</span>
<span class="o">}</span> <span class="k">yield</span> <span class="n">b</span> <span class="o">*</span> <span class="n">c</span> <span class="c1">//  6 * 4 = 24</span>

<span class="c1">// æ³¨æ„future a, b, c</span>
<span class="c1">// ä¸æ˜¯å¹¶å‘æ‰§è¡Œçš„</span>

<span class="k">val</span> <span class="n">result</span> <span class="k">=</span> <span class="nc">Await</span><span class="o">.</span><span class="n">result</span><span class="o">(</span><span class="n">f</span><span class="o">,</span> <span class="mi">1</span> <span class="n">second</span><span class="o">)</span>
<span class="n">result</span> <span class="n">must</span> <span class="n">be</span><span class="o">(</span><span class="mi">24</span><span class="o">)</span>
</pre></div>
</div>
<p>åšè¿™äº›äº‹æƒ…çš„æ—¶å€™éœ€è¦è®°ä½çš„æ˜¯ï¼šè™½ç„¶çœ‹ä¸Šå»ä¸Šä¾‹çš„éƒ¨åˆ†ä»£ç å¯ä»¥å¹¶å‘åœ°è¿è¡Œï¼Œfor comprehensionçš„æ¯ä¸€æ­¥æ˜¯é¡ºåºæ‰§è¡Œçš„ã€‚æ¯ä¸€æ­¥æ˜¯åœ¨å•ç‹¬çš„çº¿ç¨‹ä¸­è¿è¡Œçš„ï¼Œä½†æ˜¯ç›¸è¾ƒäºå°†æ‰€æœ‰çš„è®¡ç®—åœ¨ä¸€ä¸ªå•ç‹¬çš„
 <tt class="docutils literal"><span class="pre">Future</span></tt>ä¸­è¿è¡Œå¹¶æ²¡æœ‰å¤ªå¤§å¥½å¤„.
åªæœ‰åœ¨å…ˆï¼ˆè¯‘è€…æ³¨ï¼šå¼‚æ­¥åœ°ï¼‰åˆ›å»º <tt class="docutils literal"><span class="pre">Future</span></tt>ï¼Œç„¶åå¯¹å…¶è¿›è¡Œç»„åˆçš„æƒ…å†µä¸‹æ‰èƒ½å¾—åˆ°çœŸæ­£çš„å¥½å¤„ã€‚</p>
</div>
<div class="section" id="composing-futures">
<h3>ç»„åˆ Futures</h3>
<p>ä¸Šä¾‹ä¸­çš„ comprehension æ˜¯å¯¹ <tt class="docutils literal"><span class="pre">Future</span></tt>è¿›è¡Œç»„åˆçš„ä¾‹å­.
è¿™ç§æ–¹æ³•çš„å¸¸è§ç”¨ä¾‹æ˜¯å°†å¤šä¸ª <tt class="docutils literal"><span class="pre">Actor</span></tt>çš„å›åº”ç»„åˆæˆä¸€ä¸ªå•ç‹¬çš„è®¡ç®—è€Œä¸ç”¨è°ƒç”¨
 <tt class="docutils literal"><span class="pre">Await.result</span></tt> æˆ– <tt class="docutils literal"><span class="pre">Await.ready</span></tt> æ¥é˜»å¡åœ°è·å¾—æ¯ä¸€ä¸ªç»“æœ.
å…ˆçœ‹çœ‹ä½¿ç”¨ <tt class="docutils literal"><span class="pre">Await.result</span></tt> çš„ä¾‹å­:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">f1</span> <span class="k">=</span> <span class="n">ask</span><span class="o">(</span><span class="n">actor1</span><span class="o">,</span> <span class="n">msg1</span><span class="o">)</span>
<span class="k">val</span> <span class="n">f2</span> <span class="k">=</span> <span class="n">ask</span><span class="o">(</span><span class="n">actor2</span><span class="o">,</span> <span class="n">msg2</span><span class="o">)</span>

<span class="k">val</span> <span class="n">a</span> <span class="k">=</span> <span class="nc">Await</span><span class="o">.</span><span class="n">result</span><span class="o">(</span><span class="n">f1</span><span class="o">,</span> <span class="mi">1</span> <span class="n">second</span><span class="o">).</span><span class="n">asInstanceOf</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span>
<span class="k">val</span> <span class="n">b</span> <span class="k">=</span> <span class="nc">Await</span><span class="o">.</span><span class="n">result</span><span class="o">(</span><span class="n">f2</span><span class="o">,</span> <span class="mi">1</span> <span class="n">second</span><span class="o">).</span><span class="n">asInstanceOf</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span>

<span class="k">val</span> <span class="n">f3</span> <span class="k">=</span> <span class="n">ask</span><span class="o">(</span><span class="n">actor3</span><span class="o">,</span> <span class="o">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="o">))</span>

<span class="k">val</span> <span class="n">result</span> <span class="k">=</span> <span class="nc">Await</span><span class="o">.</span><span class="n">result</span><span class="o">(</span><span class="n">f3</span><span class="o">,</span> <span class="mi">1</span> <span class="n">second</span><span class="o">).</span><span class="n">asInstanceOf</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span>
</pre></div>
</div>
<p>è¿™é‡Œæˆ‘ä»¬ç­‰å¾…å‰2ä¸ª <tt class="docutils literal"><span class="pre">Actor</span></tt> çš„ç»“æœç„¶åå°†å…¶å‘é€ç»™ç¬¬ä¸‰ä¸ª <tt class="docutils literal"><span class="pre">Actor</span></tt>.
æˆ‘ä»¬è°ƒç”¨äº†3æ¬¡ <tt class="docutils literal"><span class="pre">Await.result</span></tt> , å¯¼è‡´æˆ‘ä»¬çš„ç¨‹åºåœ¨è·å¾—æœ€ç»ˆç»“æœå‰é˜»å¡äº†3æ¬¡ã€‚
ç°åœ¨è·Ÿä¸‹ä¾‹æ¯”è¾ƒ:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">f1</span> <span class="k">=</span> <span class="n">ask</span><span class="o">(</span><span class="n">actor1</span><span class="o">,</span> <span class="n">msg1</span><span class="o">)</span>
<span class="k">val</span> <span class="n">f2</span> <span class="k">=</span> <span class="n">ask</span><span class="o">(</span><span class="n">actor2</span><span class="o">,</span> <span class="n">msg2</span><span class="o">)</span>

<span class="k">val</span> <span class="n">f3</span> <span class="k">=</span> <span class="k">for</span> <span class="o">{</span>
  <span class="n">a</span> <span class="k">â†</span> <span class="n">f1</span><span class="o">.</span><span class="n">mapTo</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span>
  <span class="n">b</span> <span class="k">â†</span> <span class="n">f2</span><span class="o">.</span><span class="n">mapTo</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span>
  <span class="n">c</span> <span class="k">â†</span> <span class="n">ask</span><span class="o">(</span><span class="n">actor3</span><span class="o">,</span> <span class="o">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="o">)).</span><span class="n">mapTo</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span>
<span class="o">}</span> <span class="k">yield</span> <span class="n">c</span>

<span class="k">val</span> <span class="n">result</span> <span class="k">=</span> <span class="nc">Await</span><span class="o">.</span><span class="n">result</span><span class="o">(</span><span class="n">f3</span><span class="o">,</span> <span class="mi">1</span> <span class="n">second</span><span class="o">).</span><span class="n">asInstanceOf</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span>
</pre></div>
</div>
<p>è¿™é‡Œæˆ‘ä»¬æœ‰ä¸¤ä¸ª 2 actorå„è‡ªå¤„ç†è‡ªå·±çš„æ¶ˆæ¯ã€‚ ä¸€æ—¦è¿™2ä¸ªç»“æœå¯ç”¨äº†
(æ³¨æ„æˆ‘ä»¬å¹¶æ²¡æœ‰é˜»å¡åœ°ç­‰å¾…è¿™äº›ç»“æœï¼), å®ƒä»¬ä¼šè¢«åŠ èµ·æ¥å‘é€ç»™ç¬¬ä¸‰ä¸ª <tt class="docutils literal"><span class="pre">Actor</span></tt>,
è¿™ç¬¬ä¸‰ä¸ªactorå›åº”ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬æŠŠå®ƒèµ‹å€¼ç»™ &#8216;result&#8217;.</p>
<p>å½“æˆ‘ä»¬çŸ¥é“Actoræ•°é‡çš„æ—¶å€™ä¸Šé¢çš„æ–¹æ³•å°±è¶³å¤Ÿäº†ï¼Œä½†æ˜¯å½“Actoræ•°é‡è¾ƒå¤§æ—¶å°±æ˜¾å¾—æ¯”è¾ƒç¬¨é‡ã€‚
 <tt class="docutils literal"><span class="pre">sequence</span></tt> å’Œ <tt class="docutils literal"><span class="pre">traverse</span></tt> ä¸¤ä¸ªè¾…åŠ©æ–¹æ³•å¯ä»¥å¸®åŠ©å¤„ç†æ›´å¤æ‚çš„æƒ…å†µã€‚
è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯ç”¨æ¥å°† <tt class="docutils literal"><span class="pre">T[Future[A]]</span></tt> è½¬æ¢ä¸º <tt class="docutils literal"><span class="pre">Future[T[A]]</span></tt>ï¼ˆ<tt class="docutils literal"><span class="pre">T</span></tt> æ˜¯ <tt class="docutils literal"><span class="pre">Traversable</span></tt>å­ç±»ï¼‰.
ä¾‹å¦‚:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="c1">// oddActor ä»¥ç±»å‹ List[Future[Int]] è¿”å›ä»1å¼€å§‹çš„å¥‡æ•°åºåˆ—</span>
<span class="k">val</span> <span class="n">listOfFutures</span> <span class="k">=</span> <span class="nc">List</span><span class="o">.</span><span class="n">fill</span><span class="o">(</span><span class="mi">100</span><span class="o">)(</span><span class="n">akka</span><span class="o">.</span><span class="n">pattern</span><span class="o">.</span><span class="n">ask</span><span class="o">(</span><span class="n">oddActor</span><span class="o">,</span> <span class="nc">GetNext</span><span class="o">).</span><span class="n">mapTo</span><span class="o">[</span><span class="kt">Int</span><span class="o">])</span>

<span class="c1">// ç°åœ¨æˆ‘ä»¬æœ‰äº† Future[List[Int]]</span>
<span class="k">val</span> <span class="n">futureList</span> <span class="k">=</span> <span class="nc">Future</span><span class="o">.</span><span class="n">sequence</span><span class="o">(</span><span class="n">listOfFutures</span><span class="o">)</span>

<span class="c1">// è®¡ç®—å¥‡æ•°çš„å’Œ</span>
<span class="k">val</span> <span class="n">oddSum</span> <span class="k">=</span> <span class="nc">Await</span><span class="o">.</span><span class="n">result</span><span class="o">(</span><span class="n">futureList</span><span class="o">.</span><span class="n">map</span><span class="o">(</span><span class="n">_</span><span class="o">.</span><span class="n">sum</span><span class="o">),</span> <span class="mi">1</span> <span class="n">second</span><span class="o">).</span><span class="n">asInstanceOf</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span>
<span class="n">oddSum</span> <span class="n">must</span> <span class="n">be</span><span class="o">(</span><span class="mi">10000</span><span class="o">)</span>
</pre></div>
</div>
<p>ç°åœ¨æ¥è§£é‡Šä¸€ä¸‹, <tt class="docutils literal"><span class="pre">Future.sequence</span></tt> å°†è¾“å…¥çš„ <tt class="docutils literal"><span class="pre">List[Future[Int]]</span></tt>
è½¬æ¢ä¸º <tt class="docutils literal"><span class="pre">Future[List[Int]]</span></tt>. è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å°† <tt class="docutils literal"><span class="pre">map</span></tt> ç›´æ¥ä½œç”¨äº <tt class="docutils literal"><span class="pre">List[Int]</span></tt>,
ä»è€Œå¾—åˆ° <tt class="docutils literal"><span class="pre">List</span></tt> çš„æ€»å’Œ.</p>
<p> <tt class="docutils literal"><span class="pre">traverse</span></tt> æ–¹æ³•ä¸ <tt class="docutils literal"><span class="pre">sequence</span></tt> ç±»ä¼¼, ä½†å®ƒä»¥ <tt class="docutils literal"><span class="pre">T[A]</span></tt> å’Œ <tt class="docutils literal"><span class="pre">A</span> <span class="pre">=&gt;</span> <span class="pre">Future[B]</span></tt> å‡½æ•°ä¸ºå‚æ•°è¿”å›ä¸€ä¸ª <tt class="docutils literal"><span class="pre">Future[T[B]]</span></tt>,
è¿™é‡Œçš„ <tt class="docutils literal"><span class="pre">T</span></tt> åŒæ ·ä¹Ÿæ˜¯ Traversable çš„å­ç±». ä¾‹å¦‚, ç”¨ <tt class="docutils literal"><span class="pre">traverse</span></tt> æ¥è®¡ç®—å‰100ä¸ªå¥‡æ•°çš„å’Œ:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">futureList</span> <span class="k">=</span> <span class="nc">Future</span><span class="o">.</span><span class="n">traverse</span><span class="o">((</span><span class="mi">1</span> <span class="n">to</span> <span class="mi">100</span><span class="o">).</span><span class="n">toList</span><span class="o">)(</span><span class="n">x</span> <span class="k">â‡’</span> <span class="nc">Future</span><span class="o">(</span><span class="n">x</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="o">))</span>
<span class="k">val</span> <span class="n">oddSum</span> <span class="k">=</span> <span class="nc">Await</span><span class="o">.</span><span class="n">result</span><span class="o">(</span><span class="n">futureList</span><span class="o">.</span><span class="n">map</span><span class="o">(</span><span class="n">_</span><span class="o">.</span><span class="n">sum</span><span class="o">),</span> <span class="mi">1</span> <span class="n">second</span><span class="o">).</span><span class="n">asInstanceOf</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span>
<span class="n">oddSum</span> <span class="n">must</span> <span class="n">be</span><span class="o">(</span><span class="mi">10000</span><span class="o">)</span>
</pre></div>
</div>
<p>ç»“æœä¸è¿™ä¸ªä¾‹å­æ˜¯ä¸€æ ·çš„:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">futureList</span> <span class="k">=</span> <span class="nc">Future</span><span class="o">.</span><span class="n">sequence</span><span class="o">((</span><span class="mi">1</span> <span class="n">to</span> <span class="mi">100</span><span class="o">).</span><span class="n">toList</span><span class="o">.</span><span class="n">map</span><span class="o">(</span><span class="n">x</span> <span class="k">â‡’</span> <span class="nc">Future</span><span class="o">(</span><span class="n">x</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)))</span>
<span class="k">val</span> <span class="n">oddSum</span> <span class="k">=</span> <span class="nc">Await</span><span class="o">.</span><span class="n">result</span><span class="o">(</span><span class="n">futureList</span><span class="o">.</span><span class="n">map</span><span class="o">(</span><span class="n">_</span><span class="o">.</span><span class="n">sum</span><span class="o">),</span> <span class="mi">1</span> <span class="n">second</span><span class="o">).</span><span class="n">asInstanceOf</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span>
<span class="n">oddSum</span> <span class="n">must</span> <span class="n">be</span><span class="o">(</span><span class="mi">10000</span><span class="o">)</span>
</pre></div>
</div>
<p>ä½†æ˜¯ç”¨ <tt class="docutils literal"><span class="pre">traverse</span></tt> ä¼šå¿«ä¸€äº›ï¼Œå› ä¸ºå®ƒä¸ç”¨åˆ›å»ºä¸€ä¸ª <tt class="docutils literal"><span class="pre">List[Future[Int]]</span></tt> ä¸´æ—¶é‡.</p>
<p>æœ€åæˆ‘ä»¬æœ‰ä¸€ä¸ªæ–¹æ³• <tt class="docutils literal"><span class="pre">fold</span></tt>ï¼Œå®ƒçš„å‚æ•°åŒ…æ‹¬ä¸€ä¸ªåˆå§‹å€¼ , ä¸€ä¸ª <tt class="docutils literal"><span class="pre">Future</span></tt>åºåˆ—å’Œä¸€ä¸ª
ä½œç”¨äºåˆå§‹å€¼å’ŒFutureç±»å‹è¿”å›ä¸åˆå§‹å€¼ç›¸åŒç±»å‹çš„å‡½æ•°, å®ƒå°†è¿™ä¸ªå‡½æ•°å¼‚æ­¥åœ°åº”ç”¨äºfutureåºåˆ—çš„æ‰€æœ‰å…ƒç´ ï¼Œå®ƒçš„æ‰§è¡Œå°†åœ¨æœ€åä¸€ä¸ªFutureå®Œæˆä¹‹åå¼€å§‹ã€‚</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">futures</span> <span class="k">=</span> <span class="k">for</span> <span class="o">(</span><span class="n">i</span> <span class="k">â†</span> <span class="mi">1</span> <span class="n">to</span> <span class="mi">1000</span><span class="o">)</span> <span class="k">yield</span> <span class="nc">Future</span><span class="o">(</span><span class="n">i</span> <span class="o">*</span> <span class="mi">2</span><span class="o">)</span> <span class="c1">// Create a sequence of Futures</span>
<span class="k">val</span> <span class="n">futureSum</span> <span class="k">=</span> <span class="nc">Future</span><span class="o">.</span><span class="n">fold</span><span class="o">(</span><span class="n">futures</span><span class="o">)(</span><span class="mi">0</span><span class="o">)(</span><span class="k">_</span> <span class="o">+</span> <span class="n">_</span><span class="o">)</span>
<span class="nc">Await</span><span class="o">.</span><span class="n">result</span><span class="o">(</span><span class="n">futureSum</span><span class="o">,</span> <span class="mi">1</span> <span class="n">second</span><span class="o">)</span> <span class="n">must</span> <span class="n">be</span><span class="o">(</span><span class="mi">1001000</span><span class="o">)</span>
</pre></div>
</div>
<p>å°±æ˜¯è¿™ä¹ˆç®€å•ï¼</p>
<p>å¦‚æœä¼ ç»™ <tt class="docutils literal"><span class="pre">fold</span></tt> çš„åºåˆ—æ˜¯ç©ºçš„, å®ƒå°†è¿”å›åˆå§‹å€¼, åœ¨ä¸Šä¾‹ä¸­ï¼Œè¿™ä¸ªå€¼æ˜¯0.
æœ‰æ—¶ä½ å¹¶ä¸éœ€è¦ä¸€ä¸ªåˆå§‹å€¼ï¼Œè€Œä½¿ç”¨åºåˆ—ä¸­ç¬¬ä¸€ä¸ªå·²å®Œæˆçš„Futureçš„å€¼ä½œä¸ºåˆå§‹å€¼ï¼Œä½ å¯ä»¥ä½¿ç”¨ <tt class="docutils literal"><span class="pre">reduce</span></tt>, å®ƒçš„ç”¨æ³•æ˜¯è¿™æ ·çš„:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">futures</span> <span class="k">=</span> <span class="k">for</span> <span class="o">(</span><span class="n">i</span> <span class="k">â†</span> <span class="mi">1</span> <span class="n">to</span> <span class="mi">1000</span><span class="o">)</span> <span class="k">yield</span> <span class="nc">Future</span><span class="o">(</span><span class="n">i</span> <span class="o">*</span> <span class="mi">2</span><span class="o">)</span> <span class="c1">// åˆ›å»ºä¸€ä¸ª Future åºåˆ—</span>
<span class="k">val</span> <span class="n">futureSum</span> <span class="k">=</span> <span class="nc">Future</span><span class="o">.</span><span class="n">reduce</span><span class="o">(</span><span class="n">futures</span><span class="o">)(</span><span class="k">_</span> <span class="o">+</span> <span class="n">_</span><span class="o">)</span>
<span class="nc">Await</span><span class="o">.</span><span class="n">result</span><span class="o">(</span><span class="n">futureSum</span><span class="o">,</span> <span class="mi">1</span> <span class="n">second</span><span class="o">)</span> <span class="n">must</span> <span class="n">be</span><span class="o">(</span><span class="mi">1001000</span><span class="o">)</span>
</pre></div>
</div>
<p>ä¸ <tt class="docutils literal"><span class="pre">fold</span></tt> ä¸€æ ·, å®ƒçš„æ‰§è¡Œæ˜¯åœ¨æœ€åä¸€ä¸ª Future å®Œæˆåå¼‚æ­¥æ‰§è¡Œçš„,
ä½ ä¹Ÿå¯ä»¥å¯¹è¿™ä¸ªè¿‡ç¨‹è¿›è¡Œå¹¶è¡ŒåŒ–ï¼šå°†futureåˆ†æˆå­åºåˆ—åˆ†åˆ«è¿›è¡Œreduceï¼Œç„¶åå¯¹reduceçš„ç»“æœå†æ¬¡reduceã€‚</p>
</div>
</div>
<div class="section" id="callbacks">
<h2>å›è°ƒ</h2>
<p>æœ‰æ—¶ä½ åªéœ€è¦ç›‘å¬ <tt class="docutils literal"><span class="pre">Future</span></tt> çš„å®Œæˆäº‹ä»¶, å¯¹å…¶è¿›è¡Œå“åº”ï¼Œä¸æ˜¯åˆ›å»ºæ–°çš„Futureï¼Œè€Œä»…ä»…æ˜¯äº§ç”Ÿå‰¯ä½œç”¨.
Akka ä¸ºè¿™ç§æƒ…å†µå‡†å¤‡äº† <tt class="docutils literal"><span class="pre">onComplete</span></tt>, <tt class="docutils literal"><span class="pre">onSuccess</span></tt> å’Œ <tt class="docutils literal"><span class="pre">onFailure</span></tt>, è€Œåä¸¤è€…ä»…ä»…æ˜¯ç¬¬ä¸€é¡¹çš„ç‰¹ä¾‹ã€‚</p>
<div class="highlight-scala"><pre>future onSuccess {
  case "bar"     â‡’ println("Got my bar alright!")
  case x: String â‡’ println("Got some random string: " + x)
}
</pre>
</div>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">future</span> <span class="n">onFailure</span> <span class="o">{</span>
  <span class="k">case</span> <span class="n">ise</span><span class="k">:</span> <span class="kt">IllegalStateException</span> <span class="kt">if</span> <span class="kt">ise.getMessage</span> <span class="o">=</span><span class="k">=</span> <span class="s">&quot;OHNOES&quot;</span> <span class="k">â‡’</span>
  <span class="c1">//OHNOES! We are in deep trouble, do something!</span>
  <span class="k">case</span> <span class="n">e</span><span class="k">:</span> <span class="kt">Exception</span> <span class="k">â‡’</span>
  <span class="kt">//Do</span> <span class="kt">something</span> <span class="kt">else</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">future</span> <span class="n">onComplete</span> <span class="o">{</span>
  <span class="k">case</span> <span class="nc">Right</span><span class="o">(</span><span class="n">result</span><span class="o">)</span> <span class="k">â‡’</span> <span class="n">doSomethingOnSuccess</span><span class="o">(</span><span class="n">result</span><span class="o">)</span>
  <span class="k">case</span> <span class="nc">Left</span><span class="o">(</span><span class="n">failure</span><span class="o">)</span> <span class="k">â‡’</span> <span class="n">doSomethingOnFailure</span><span class="o">(</span><span class="n">failure</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="define-ordering">
<h2>å®šä¹‰æ¬¡åº</h2>
<p>ç”±äºå›è°ƒçš„æ‰§è¡Œæ˜¯æ— åºçš„ï¼Œè€Œä¸”å¯èƒ½æ˜¯å¹¶å‘æ‰§è¡Œçš„,
å½“ä½ éœ€è¦ä¸€ç»„æœ‰åºæ“ä½œçš„æ—¶å€™éœ€è¦ä¸€äº›æŠ€å·§ã€‚ä½†æœ‰ä¸€ä¸ªè§£å†³åŠæ³•æ˜¯ä½¿ç”¨ <tt class="docutils literal"><span class="pre">andThen</span></tt>.
    å®ƒä¼šä¸ºæŒ‡å®šçš„å›è°ƒåˆ›å»ºä¸€ä¸ªæ–°çš„ <tt class="docutils literal"><span class="pre">Future</span></tt> ,
    è¿™ä¸ª <tt class="docutils literal"><span class="pre">Future</span></tt> ä¸åŸå…ˆçš„ <tt class="docutils literal"><span class="pre">Future</span></tt> æ‹¥æœ‰ç›¸åŒçš„ç»“æœ,
è¿™æ ·å°±å¯ä»¥è±¡ä¸‹ä¾‹ä¸€æ ·å®šä¹‰æ¬¡åº:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">result</span> <span class="k">=</span> <span class="nc">Future</span> <span class="o">{</span> <span class="n">loadPage</span><span class="o">(</span><span class="n">url</span><span class="o">)</span> <span class="o">}</span> <span class="n">andThen</span> <span class="o">{</span>
  <span class="k">case</span> <span class="nc">Left</span><span class="o">(</span><span class="n">exception</span><span class="o">)</span> <span class="k">â‡’</span> <span class="n">log</span><span class="o">(</span><span class="n">exception</span><span class="o">)</span>
<span class="o">}</span> <span class="n">andThen</span> <span class="o">{</span>
  <span class="k">case</span> <span class="k">_</span> <span class="k">â‡’</span> <span class="n">watchSomeTV</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="auxiliary-methods">
<h2>è¾…åŠ©æ–¹æ³•</h2>
<p><tt class="docutils literal"><span class="pre">Future</span></tt> <tt class="docutils literal"><span class="pre">fallbackTo</span></tt>
    å°†ä¸¤ä¸ª Futures åˆå¹¶æˆä¸€ä¸ªæ–°çš„ <tt class="docutils literal"><span class="pre">Future</span></tt>,
    å¦‚æœç¬¬ä¸€ä¸ª<tt class="docutils literal"><span class="pre">Future</span></tt>å¤±è´¥äº†ï¼Œå®ƒå°†æŒæœ‰ç¬¬äºŒä¸ª <tt class="docutils literal"><span class="pre">Future</span></tt>
    çš„æˆåŠŸå€¼ã€‚</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">future4</span> <span class="k">=</span> <span class="n">future1</span> <span class="n">fallbackTo</span> <span class="n">future2</span> <span class="n">fallbackTo</span> <span class="n">future3</span>
</pre></div>
</div>
<p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨<tt class="docutils literal"><span class="pre">zip</span></tt>æ“ä½œå°†ä¸¤ä¸ª Futures ç»„åˆæˆä¸€ä¸ªæ–°çš„æŒæœ‰äºŒè€…æˆåŠŸç»“æœçš„tupleçš„ <tt class="docutils literal"><span class="pre">Future</span></tt></p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">future3</span> <span class="k">=</span> <span class="n">future1</span> <span class="n">zip</span> <span class="n">future2</span> <span class="n">map</span> <span class="o">{</span> <span class="k">case</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="k">â‡’</span> <span class="n">a</span> <span class="o">+</span> <span class="s">&quot; &quot;</span> <span class="o">+</span> <span class="n">b</span> <span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="exceptions">
<h2>å¼‚å¸¸</h2>
<p>ç”±äº <tt class="docutils literal"><span class="pre">Future</span></tt> çš„ç»“æœæ˜¯ä¸ç¨‹åºçš„å…¶å®ƒéƒ¨åˆ†å¹¶å‘ç”Ÿæˆçš„ï¼Œå› æ­¤å¼‚å¸¸éœ€è¦ä½œç‰¹æ®Šçš„å¤„ç†ã€‚
ä¸ç®¡æ˜¯ <tt class="docutils literal"><span class="pre">Actor</span></tt> æˆ–æ˜¯æ´¾å‘å™¨æ­£åœ¨å®Œæˆæ­¤ <tt class="docutils literal"><span class="pre">Future</span></tt>,
å¦‚æœæŠ›å‡ºäº† <tt class="docutils literal"><span class="pre">Exception</span></tt> ï¼Œ<tt class="docutils literal"><span class="pre">Future</span></tt> å°†æŒæœ‰è¿™ä¸ªå¼‚å¸¸è€Œä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„å€¼.
å¦‚æœ <tt class="docutils literal"><span class="pre">Future</span></tt> æŒæœ‰ <tt class="docutils literal"><span class="pre">Exception</span></tt>, è°ƒç”¨ <tt class="docutils literal"><span class="pre">Await.result</span></tt> å°†å¯¼è‡´æ­¤å¼‚å¸¸è¢«å†æ¬¡æŠ›å‡ºä»è€Œå¾—åˆ°æ­£ç¡®çš„å¤„ç†.</p>
<p>é€šè¿‡è¿”å›ä¸€ä¸ªå…¶å®ƒçš„ç»“æœæ¥å¤„ç† <tt class="docutils literal"><span class="pre">Exception</span></tt> ä¹Ÿæ˜¯å¯èƒ½çš„.
ä½¿ç”¨ <tt class="docutils literal"><span class="pre">recover</span></tt> æ–¹æ³•. ä¾‹å¦‚:</p>
<div class="highlight-scala"><pre>val future = akka.pattern.ask(actor, msg1) recover {
  case e: ArithmeticException â‡’ 0
}
</pre>
</div>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœactorå›åº”äº†åŒ…å« <tt class="docutils literal"><span class="pre">ArithmeticException</span></tt>çš„<tt class="docutils literal"><span class="pre">akka.actor.Status.Failure</span></tt> ,
æˆ‘ä»¬çš„ <tt class="docutils literal"><span class="pre">Future</span></tt> å°†æŒæœ‰ 0 ä½œä¸ºç»“æœ. The <tt class="docutils literal"><span class="pre">recover</span></tt> æ–¹æ³•ä¸æ ‡å‡†çš„ try/catch å—éå¸¸ç›¸ä¼¼,
å¯ä»¥ç”¨è¿™ç§æ–¹å¼å¤„ç†å¤šç§ <tt class="docutils literal"><span class="pre">Exception</span></tt>ï¼Œ å¦‚æœå…¶ä¸­æœ‰æ²¡æœ‰æåˆ°çš„ <tt class="docutils literal"><span class="pre">Exception</span></tt>ï¼Œè¿™ç§å¼‚å¸¸å°†
ä»¥æ²¡æœ‰å®šä¹‰ <tt class="docutils literal"><span class="pre">recover</span></tt> æ–¹æ³•çš„æ–¹å¼æ¥å¤„ç†.</p>
<p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <tt class="docutils literal"><span class="pre">recoverWith</span></tt> æ–¹æ³•, å®ƒå’Œ <tt class="docutils literal"><span class="pre">recover</span></tt> çš„å…³ç³»å°±è±¡ <tt class="docutils literal"><span class="pre">flatMap</span></tt> ä¸ <tt class="docutils literal"><span class="pre">map</span></tt>çš„å…³ç³»,
ç”¨æ³•å¦‚ä¸‹:</p>
<div class="highlight-scala"><pre>val future = akka.pattern.ask(actor, msg1) recoverWith {
  case e: ArithmeticException        â‡’ Promise.successful(0)
  case foo: IllegalArgumentException â‡’ Promise.failed[Int](new IllegalStateException("All br0ken!"))
}
</pre>
</div>
</div>
</div>


          </div>
          <div class="span3"><p class="contents-title">Contents</p>
              <div id="scroller-anchor">
                <div id="scroller">
                  <div id="toc"></div>
                </div>
              </div></div>
        </div>
      </div>
    </div>
  </div>
  <div class="footer">
  <div class="container">
    <ul>
      <li><h5>Akka</h5></li>
      <li><a href="javascript:if(confirm('http://akka.io/docs  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://akka.io/docs'" tppabs="http://akka.io/docs">Documentation</a></li>
      <li><a href="javascript:if(confirm('http://akka.io/downloads  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://akka.io/downloads'" tppabs="http://akka.io/downloads">Downloads</a></li>
      <li><a href="javascript:if(confirm('http://akka.io/news  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://akka.io/news'" tppabs="http://akka.io/news">News</a></li>
      <li><a href="javascript:if(confirm('http://letitcrash.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://letitcrash.com/'" tppabs="http://letitcrash.com/">Blog</a></li>
    </ul>
    <ul>
      <li><h5>Contribute</h5></li>
      <li><a href="javascript:if(confirm('http://github.com/akka/akka  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://github.com/akka/akka'" tppabs="http://github.com/akka/akka">Source Code</a></li>
      <li><a href="javascript:if(confirm('http://groups.google.com/group/akka-user  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://groups.google.com/group/akka-user'" tppabs="http://groups.google.com/group/akka-user">Mailing List</a></li>      
      <li><a href="javascript:if(confirm('http://www.assembla.com/spaces/akka/tickets  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.assembla.com/spaces/akka/tickets'" tppabs="http://www.assembla.com/spaces/akka/tickets">Report a Bug</a></li>      
    </ul>
    <ul>
      <li><h5>Company</h5></li>
      <li><a href="javascript:if(confirm('http://typesafe.com/products/typesafe-subscription  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://typesafe.com/products/typesafe-subscription'" tppabs="http://typesafe.com/products/typesafe-subscription">Commercial Support</a></li>
      <li><a href="javascript:if(confirm('http://akka.io/team  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://akka.io/team'" tppabs="http://akka.io/team">Team</a></li>
      <li><a href="mailto:info@typesafe.com">Contact</a></li>
    </ul>
    <ul>
      <li><img src="../_static/watermark.png" tppabs="http://www.gtan.com/akka_doc/_static/watermark.png" align="center"/></li>
    </ul>
  </div>
  <div class="container copyright">
    <p style="float: left;">
      Â© 2012 <a href="javascript:if(confirm('http://typesafe.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://typesafe.com/'" tppabs="http://typesafe.com/">Typesafe Inc.</a> <span class="license">Akka is Open Source and available under the Apache 2 License.</span>
    </p>
    <p style="float: right; font-size: 12px;">
      Last updated: Mar 08, 2012
    </p>          
  </div>
</div>
<script type="text/javascript">
  $('#toc').toc();
</script>
  

  </body>
</html>
<!-- Localized -->